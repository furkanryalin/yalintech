import{g as $,S as ce}from"./ScrollTrigger.C0eCJjti.js";import{f as le,a as de,g as he,h as fe,j as ue}from"./animations.Dqzr3C2x.js";$.registerPlugin(ce);function pe(){const n=document.getElementById("particles-canvas-full");if(!n)return;const c=n.getContext("2d");if(!c)return;let F=typeof Worker<"u"&&typeof URL<"u",l=null,g=!1;function H(){n.width=window.innerWidth,n.height=window.innerHeight,g&&l&&l.postMessage({type:"resize",width:n.width,height:n.height})}H(),window.addEventListener("resize",H);const h=window.innerWidth<768,A={hero:{count:h?40:100,distance:h?100:180,color:"#0070f3",alpha:1,speed:h?.45:.8},projects:{count:h?25:70,distance:h?90:140,color:"#0ea5e9",alpha:.85,speed:h?.32:.45},cta:{count:h?15:50,distance:h?70:110,color:"#2563eb",alpha:.65,speed:h?.22:.35},default:{count:h?30:60,distance:h?80:120,color:"#0070f3",alpha:.6,speed:h?.3:.5}};let X=!1,D=!1;class te{constructor(t=.6){this.speedFactor=t,this.x=Math.random()*n.width,this.y=Math.random()*n.height;const o=(t||i.speed||.6)*1.6;this.vx=(Math.random()-.5)*o,this.vy=(Math.random()-.5)*o,this.radius=Math.random()*2+1}x;y;vx;vy;radius;update(){m-this.x,y-this.y,this.x+=this.vx,this.y+=this.vy,this.vx*=.988,this.vy*=.988;const t=(i.speed||.4)*.06;this.vx+=(Math.random()-.5)*t,this.vy+=(Math.random()-.5)*t,this.x<-50&&(this.x=n.width+50),this.x>n.width+50&&(this.x=-50),this.y<-50&&(this.y=n.height+50),this.y>n.height+50&&(this.y=-50)}draw(t){c.beginPath(),c.arc(this.x,this.y,this.radius,0,Math.PI*2),c.fillStyle=t,c.fill()}}let i={...A.default},r=[];function B(e){const t=e-r.length;if(t>0)for(let o=0;o<t;o++)r.push(new te(i.speed));else t<0&&(r=r.slice(0,e));try{g&&l&&l.postMessage({type:"setCount",count:Math.round(e)})}catch{}}B(Math.round(i.count));let m=-1e3,y=-1e3,N=120;function ne(){if(F)try{l=new Worker(new URL("/_astro/particle-worker-CMU-iLHl.js",import.meta.url),{type:"module"}),l.addEventListener("message",e=>{const t=e.data;if(t&&t.type==="positions"&&ArrayBuffer.isView(t.positions)){const o=t.positions,s=Math.min(r.length,o.length/2);for(let d=0;d<s;d++)r[d].x=o[2*d],r[d].y=o[2*d+1]}}),g===!1&&l&&(l.postMessage({type:"init",count:Math.round(i.count),width:n.width,height:n.height,config:{speed:i.speed,enableMouseAttract:X}}),g=!0)}catch{l=null,F=!1,g=!1}}ne();function R(e){const t=n.getBoundingClientRect();if(e.touches&&e.touches.length)m=e.touches[0].clientX-t.left,y=e.touches[0].clientY-t.top;else if(e.clientX!==void 0){const o=e;m=o.clientX-t.left,y=o.clientY-t.top}g&&l&&l.postMessage({type:"mouse",x:m,y})}n.addEventListener("mousemove",R),n.addEventListener("touchstart",R,{passive:!0}),n.addEventListener("touchmove",R,{passive:!0}),n.addEventListener("mouseleave",()=>{m=-1e3,y=-1e3});function W(e){const t=A[e]||A.default;i.color=t.color,$.to(i,{count:t.count,distance:t.distance,alpha:t.alpha,speed:t.speed,duration:.8,ease:"power2.out",onUpdate:()=>{B(Math.round(i.count)),g&&l&&l.postMessage({type:"updateConfig",config:{speed:i.speed,enableMouseAttract:X}})}})}const oe=Array.from(document.querySelectorAll("[data-particles]"));function ie(){const e=window.scrollY+window.innerHeight/2;let t={name:"default",delta:1/0};return oe.forEach(o=>{const s=o.getBoundingClientRect(),d=s.top+window.scrollY+s.height/2,C=Math.abs(d-e);C<t.delta&&(t={name:o.getAttribute("data-particles")||"default",delta:C})}),t.name}let T="";function V(){const e=ie();e!==T&&(T=e,W(e))}let I=!1;window.addEventListener("scroll",()=>{I||(I=!0,requestAnimationFrame(()=>{V(),I=!1}))},{passive:!0});function u(e){e==="low"?$.to(i,{count:Math.max(10,Math.round((i.count||60)*.45)),distance:(i.distance||120)*.7,speed:(i.speed||.4)*.55,duration:.5,ease:"power2.out",onUpdate:()=>B(Math.round(i.count))}):W(T||"hero")}const x=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)")||null;function j(e){e.matches?(u("low"),D=!1):u("normal")}if(x){x.matches&&j(x);try{x.addEventListener("change",j)}catch{x.addListener(j)}}let p=!1;async function ae(){try{if(navigator.getBattery){const s=await navigator.getBattery();if(!s.charging&&s.level!==void 0&&s.level<=.2){p=!0,u("low");return}s.addEventListener("levelchange",()=>{!s.charging&&s.level<=.2?(p=!0,u("low")):(s.charging||s.level>.3)&&p&&(p=!1,u("normal"))})}const e=navigator;if(e.connection&&e.connection.effectiveType){const s=e.connection.effectiveType;if(s==="2g"||s==="slow-2g"){p=!0,u("low");return}e.connection.addEventListener("change",()=>{const d=e.connection.effectiveType;d==="2g"||d==="slow-2g"?(p=!0,u("low")):p&&(p=!1,u("normal"))})}const t=navigator.deviceMemory||4,o=navigator.hardwareConcurrency||4;if(t<=2||o<=2){p=!0,u("low");return}}catch(e){console.warn("[particles] performance detection failed",e)}}ae();function se(e){e=e.replace("#","");const t=parseInt(e.substring(0,2),16),o=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return{r:t,g:o,b:s}}function U(){const e=i.distance||120,t=i.alpha||.6,o=(i.color||"#0070f3").replace("#",""),{r:s,g:d,b:C}=se(o),Q=1,L=Math.max(60,Math.ceil(e)),M=Math.max(1,Math.ceil(n.width/L)),E=Math.max(1,Math.ceil(n.height/L)),b=new Array(M*E);for(let a=0;a<b.length;a++)b[a]=[];for(let a=0;a<r.length;a++){const f=r[a],w=Math.min(M-1,Math.max(0,Math.floor(f.x/L))),v=Math.min(E-1,Math.max(0,Math.floor(f.y/L)));b[v*M+w].push(a)}for(let a=0;a<E;a++)for(let f=0;f<M;f++){const w=b[a*M+f];if(w.length)for(let v=0;v<w.length;v++){const S=w[v],k=r[S];for(let q=Math.max(0,a-1);q<=Math.min(E-1,a+1);q++)for(let z=Math.max(0,f-1);z<=Math.min(M-1,f+1);z++){const Z=b[q*M+z];for(let Y=0;Y<Z.length;Y++){const _=Z[Y];if(_<=S)continue;const P=r[_],G=k.x-P.x,J=k.y-P.y,K=Math.sqrt(G*G+J*J);if(K<e){c.beginPath();const re=t*(1-K/e);c.lineWidth=Q,c.strokeStyle=`rgba(${s}, ${d}, ${C}, ${re})`,c.moveTo(k.x,k.y),c.lineTo(P.x,P.y),c.stroke()}}}}}if(m>-999)for(let a=0;a<r.length;a++){const f=r[a].x-m,w=r[a].y-y,v=Math.sqrt(f*f+w*w);if(v<N){c.beginPath();const S=Math.max(0,.5-v/N*.5);c.lineWidth=Q,c.strokeStyle=`rgba(0, 112, 243, ${S})`,c.moveTo(r[a].x,r[a].y),c.lineTo(m,y),c.stroke()}}}performance.now();function O(){performance.now(),c.clearRect(0,0,n.width,n.height),D?(r.forEach(e=>{e.draw(i.color)}),U()):g&&l?(r.forEach(e=>{e.draw(i.color)}),U()):(r.forEach(e=>{e.update(),e.draw(i.color)}),U()),requestAnimationFrame(O)}O(),W("hero"),V(),window.addEventListener("beforeunload",()=>{if(l)try{l.terminate()}catch{}})}function ee(){le(),de(),pe(),he(".split-text-reveal"),fe(".zoom-reveal-items > div",.2),ue(".fade-up-reveal")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ee):ee();
