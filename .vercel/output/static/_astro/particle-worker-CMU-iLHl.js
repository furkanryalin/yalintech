(function(){"use strict";let r=0,o=800,s=600,i=null,l=null,u=null,w=null,a={},M=!1,h=-1e3,b=-1e3,k=120,g=null;function p(e=0,t=1){return Math.random()*(t-e)+e}function v(e){r=Math.max(0,Math.floor(e.count||0)),o=e.width||o,s=e.height||s,a=e.config||a,i=new Float32Array(r*2),l=new Float32Array(r),u=new Float32Array(r),w=new Float32Array(r);for(let t=0;t<r;t++)i[2*t]=p(0,o),i[2*t+1]=p(0,s),l[t]=(Math.random()-.5)*(a.speed||.4),u[t]=(Math.random()-.5)*(a.speed||.4),w[t]=p(1,2.5);g&&clearInterval(g),g=self.setInterval(q,1e3/60)}function F(e,t){o=e,s=t}function C(e){v({count:e,width:o,height:s,config:a})}function I(e){a={...a,...e||{}}}function z(e,t){h=e,b=t}function j(e){M=!!e}function q(){if(!i||!l||!u)return;const e=.988,t=(a.speed||.4)*.06;for(let n=0;n<r;n++)if(!M){l[n]*=e,u[n]*=e,l[n]+=(Math.random()-.5)*t,u[n]+=(Math.random()-.5)*t;let c=i[2*n]+l[n],f=i[2*n+1]+u[n];if(c<-50&&(c=o+50),c>o+50&&(c=-50),f<-50&&(f=s+50),f>s+50&&(f=-50),a.enableMouseAttract&&h>-999){const y=h-c,m=b-f,d=Math.sqrt(y*y+m*m);if(d>0&&d<k){const x=(1-d/k)*.12*(a.speed||.4);l[n]+=y/d*x,u[n]+=m/d*x}}i[2*n]=c,i[2*n+1]=f}const A=new Float32Array(i);self.postMessage({type:"positions",positions:A},[A.buffer])}self.addEventListener("message",e=>{const t=e.data;if(!(!t||!t.type))switch(t.type){case"init":v({count:t.count||0,width:t.width||o,height:t.height||s,config:t.config||{}});break;case"resize":F(t.width,t.height);break;case"setCount":C(t.count);break;case"updateConfig":I(t.config);break;case"mouse":z(t.x,t.y);break;case"paused":j(!!t.paused);break}})})();
